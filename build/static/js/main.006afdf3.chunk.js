(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{113:function(e,t,a){},125:function(e,t,a){},145:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(0),c=a.n(r),s=a(37),i=a.n(s),o=(a(93),a(15)),u=(a(94),a(36)),l=a(9),j=a(11),b=a.n(j),m=a(19),d=a(23),p=(a(113),a(175)),O=a(42),h=a(166),x=a(173),f=a(177),g=a(180),v=a(181),w=a(176),y=a(21),k={firstName:"",lastName:"",email:"",contactNumber:"",ssn:"",address:""},S=function(e){var t=Object(r.useState)(k),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)(!1),u=Object(o.a)(i,2),l=u[0],j=u[1],S=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.post)("/users/submit",t.value);case 3:200===e.sent.status&&(s(k),j(!0),setTimeout((function(){j(!1)}),2e3)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error is",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(p.a,{theme:y.grommet,children:Object(n.jsx)(O.a,{align:"center",justify:"center",children:Object(n.jsx)(O.a,{width:"medium",children:Object(n.jsxs)(h.a,{value:c,onChange:function(e){s(e)},onReset:function(){return s(k)},onSubmit:S,children:[Object(n.jsx)(x.a,{label:"First Name",name:"firstName",children:Object(n.jsx)(f.a,{name:"firstName"})}),Object(n.jsx)(x.a,{label:"Last Name",name:"lastName",children:Object(n.jsx)(f.a,{name:"lastName"})}),Object(n.jsx)(x.a,{label:"Email",name:"email",required:!0,children:Object(n.jsx)(g.a,{name:"email",mask:[{regexp:/^[\w\-_.]+$/,placeholder:"example"},{fixed:"@"},{regexp:/^[\w]+$/,placeholder:"my"},{fixed:"."},{regexp:/^[\w]+$/,placeholder:"com"}]})}),Object(n.jsx)(x.a,{label:"Contact Number",name:"contactNumber",children:Object(n.jsx)(f.a,{name:"contactNumber"})}),Object(n.jsx)(x.a,{label:"SSN",name:"ssn",children:Object(n.jsx)(f.a,{name:"ssn"})}),Object(n.jsx)(x.a,{label:"Full Address",name:"address",children:Object(n.jsx)(v.a,{name:"address"})}),l&&Object(n.jsx)("div",{className:"message",children:"Details Submitted Successfully"}),Object(n.jsxs)(O.a,{direction:"row",justify:"between",margin:{top:"medium"},children:[Object(n.jsx)(w.a,{type:"reset",label:"Reset"}),Object(n.jsx)(w.a,{type:"submit",label:"Submit",primary:!0})]})]})})})})},N=a(20),A=a(168),L=a(169),P=function(){var e=Object(m.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.get)("/users",{headers:{Authorization:"Bearer "+t}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(d.post)("/login",t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.get)("/logout",{headers:{Authorization:"Bearer "+t}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(r.createContext)();function E(){return Object(r.useContext)(T)}a(125);var $=Object(r.createContext)();function D(){return Object(r.useContext)($)}var I={email:"",password:"",reveal:!1},z=function(e){var t=Object(r.useState)(I),a=Object(o.a)(t,2),c=a[0],s=a[1],i=E().setPage,u=Object(r.useState)(!1),l=Object(o.a)(u,2),j=l[0],d=l[1],v=D().setAuthTokens,k=function(){var t=Object(m.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C(a.value);case 3:n=t.sent,console.log("response",n),n.data?(v(n.data.token),i({title:"Users Table",isAdminPage:!0,isLoggedin:!0}),e.history.push("/users")):(d(!0),s(I),setTimeout((function(){d(!1)}),2e3)),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),d(!0),s(I),setTimeout((function(){d(!1)}),2e3);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){i({title:"Admin Login",isAdminPage:!0,isLoggedin:!1})}),[]),Object(n.jsx)("div",{className:"login-form",children:Object(n.jsx)(p.a,{theme:y.grommet,children:Object(n.jsx)(O.a,{fill:!0,align:"center",justify:"center",children:Object(n.jsx)(O.a,{width:"medium",children:Object(n.jsxs)(h.a,{value:c,onChange:function(e){s(e)},onReset:function(){return s(I)},onSubmit:k,children:[Object(n.jsx)(x.a,{label:"Email",name:"email",required:!0,children:Object(n.jsx)(g.a,{name:"email",mask:[{regexp:/^[\w\-_.]+$/,placeholder:"example"},{fixed:"@"},{regexp:/^[\w]+$/,placeholder:"my"},{fixed:"."},{regexp:/^[\w]+$/,placeholder:"com"}]})}),Object(n.jsx)(x.a,{label:"Password",name:"password",children:Object(n.jsx)(f.a,{name:"password",type:c.reveal?"text":"password"})}),j&&Object(n.jsx)("div",{className:"error",children:"Invalid email or password"}),Object(n.jsx)(w.a,{icon:c.reveal?Object(n.jsx)(A.a,{size:"medium"}):Object(n.jsx)(L.a,{size:"medium"}),onClick:function(){return s(Object(N.a)(Object(N.a)({},c),{},{reveal:!c.reveal}))}}),Object(n.jsxs)(O.a,{direction:"row",justify:"between",margin:{top:"medium"},children:[Object(n.jsx)(w.a,{label:"Cancel",onClick:function(t){i({title:"Submit Form Details",isAdminPage:!1,isLoggedin:!1}),e.history.push("/",{title:"Submit Form Details",isAdminPage:!1})}}),Object(n.jsx)(w.a,{type:"submit",label:"Login",primary:!0})]})]})})})})})},B=a(172),J=a(82),R=a.n(J),q=(a(145),[{property:"firstName",header:"First Name"},{property:"lastName",header:"Last Name"},{property:"email",header:"Email Address"},{property:"contactNumber",header:"Contact Number"},{property:"ssn",header:"SSN"},{property:"address",header:"Full Address"}]),_=function(e){var t=Object(r.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)(!0),u=Object(o.a)(i,2),l=u[0],j=u[1],b=D().authTokens;return Object(r.useEffect)((function(){var e=!0;return P(b).then((function(t){e&&(s(t.data),j(!1))})).catch((function(e){console.log(e)})),function(){e=!1}}),[]),l?Object(n.jsx)("div",{className:"loader",children:Object(n.jsx)(R.a,{type:"Grid",color:"#00BFFF",height:80,width:80})}):Object(n.jsx)(p.a,{theme:y.grommet,children:Object(n.jsx)(O.a,{align:"center",pad:"large",children:Object(n.jsx)(B.a,{columns:q,data:c,step:10})})})},G=a(170),M=a(182),U=a(171),H=a.p+"static/media/wissen.c081130c.jpg",K=Object(l.g)((function(e){var t=D(),a=t.setAuthTokens,c=t.authTokens,s=Object(r.useState)(!1),i=Object(o.a)(s,1)[0],u=E(),l=u.page,j=u.setPage,d=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(c);case 2:200===e.sent.status&&(j({title:"Submit Form Details",isAdminPage:!1,isLoggedin:!1}),a(""),i(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(p.a,{theme:y.grommet,children:Object(n.jsxs)(G.a,{background:"dark-1",pad:"small",children:[Object(n.jsxs)(O.a,{direction:"row",align:"center",gap:"small",children:[Object(n.jsx)(M.a,{src:H}),l.title]}),Object(n.jsxs)(U.a,{direction:"row",children:[!l.isAdminPage&&Object(n.jsx)(w.a,Object(N.a)({primary:!0,label:"Admin Login",onClick:function(){j({title:"Admin Login",isAdminPage:!0,isLoggedin:!1}),e.history.push("/login")}},e)),l.isLoggedin&&Object(n.jsx)(w.a,Object(N.a)({primary:!0,label:"Logout",onClick:d},e))]})]})})})),Q=a(84),V=function(e){var t=e.component,a=Object(Q.a)(e,["component"]),r=D().authTokens;return Object(n.jsx)(l.b,Object(N.a)(Object(N.a)({},a),{},{render:function(e){return r?(console.log("tokens are",r),Object(n.jsx)(t,Object(N.a)({},e))):Object(n.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var W=function(){var e=localStorage.getItem("tokens")?JSON.parse(localStorage.getItem("tokens")):"",t=Object(r.useState)(e),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)({title:"Submit From Details",isAdminPage:!!e,isLoggedin:e}),j=Object(o.a)(i,2),b=j[0],m=j[1];return Object(n.jsx)($.Provider,{value:{authTokens:c,setAuthTokens:function(e){localStorage.setItem("tokens",JSON.stringify(e)),s(e)}},children:Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(u.a,{children:Object(n.jsxs)(T.Provider,{value:{page:b,setPage:m},children:[Object(n.jsx)(K,{}),Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{exact:!0,path:"/",component:S}),Object(n.jsx)(l.b,{exact:!0,path:"/login",component:z}),Object(n.jsx)(V,{exact:!0,path:"/users",component:_})]})]})})})})};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(W,{})}),document.getElementById("root"))},93:function(e,t,a){},94:function(e,t,a){}},[[148,1,2]]]);
//# sourceMappingURL=main.006afdf3.chunk.js.map